{% for item in items if not item.viewBag.isHidden %}
    <li role="presentation" class="{% if not sub %} menu-item {% endif %} {{ item.isActive ? 'active' : '' }} {{ item.isChildActive ? 'child-active' : '' }} {{ item.viewBag.cssClass }}">
        {% if item.url %}
        {% if item.items or not sub %}<span>{% endif %}
            <a href="{{ item.url }}" {{ item.viewBag.isExternal ? 'target="_blank"' }}>
                {{ item.title }}
            </a>
            {% if item.items %}</span>{% endif %}
        {% else %}
            <span>{{ item.title }}</span>
        {% endif %}

        {% if item.items %}
            <ul>{% partial __SELF__ ~ "::items" items=item.items sub="1111" %}</ul>
        {% endif %}
    </li>
{% endfor %}